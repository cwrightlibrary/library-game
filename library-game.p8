pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
--game loop
function _init()
 _palette()
 _world()
 _player()
end

function _draw()
 world:draw()
 player:draw()
end

function update60()

end
-->8
--test
function _palette()
 pal({[0]=0,1,128,141,4,5,6,7,14,9,143,134,132,13,140,15},1)
 if time()<=1 then
  poke(0x5f2e,1)
 end
end

function _world()
 world={sp=64}
 world.draw=function()
  cls(world.bg1)
  for x=0,15 do
   for y=0,15 do
    spr(world.sp,x*8,y*8)
   end
  end
 end
end

function _player()
 player={index_t={},index_s={}}
 for i=1,7 do
  local sp_t={s=i,x=20+(i*12),y=40,w=1,h=2,flip_h=false,flip_v=false}
  local sp_s={s=i+32,x=20+(i*12),y=64,w=1,h=1,flip_h=false,flip_v=false}
  add(player.index_t,sp_t) add(player.index_s,sp_s)
 end
 player.draw=function()
  for sp_t in all(player.index_t) do
   line(sp_t.x,sp_t.y+17,sp_t.x+6,sp_t.y+17,11)
   line(sp_t.x+1,sp_t.y+18,sp_t.x+5,sp_t.y+18,11)
   line(sp_t.x,sp_t.y+16,sp_t.x+6,sp_t.y+16,3)
   line(sp_t.x+1,sp_t.y+17,sp_t.x+5,sp_t.y+17,3)
   
   ospr(sp_t.s,sp_t.x,sp_t.y,sp_t.w,sp_t.h,sp_t.flip_h,sp_t.flip_v)
  end
  for sp_s in all(player.index_s) do
   line(sp_s.x,sp_s.y+9,sp_s.x+6,sp_s.y+9,11)
   line(sp_s.x+1,sp_s.y+10,sp_s.x+5,sp_s.y+10,11)
   line(sp_s.x,sp_s.y+8,sp_s.x+6,sp_s.y+8,3)
   line(sp_s.x+1,sp_s.y+9,sp_s.x+5,sp_s.y+9,3)

   ospr(sp_s.s,sp_s.x,sp_s.y,sp_s.w,sp_s.h,sp_s.flip_h,sp_s.flip_v)
  end
 end
end

function setblack()
 for i=1,15 do
  pal(i,0)
 end
end

function ospr(sp,x,y,w,h,flip_h,flip_v)
 setblack()
 spr(sp,x-1,y,w,h,flip_h,flip_v)
 spr(sp,x+1,y,w,h,flip_h,flip_v)
 
 spr(sp,x,y-1,w,h,flip_h,flip_v)
 spr(sp,x,y+1,w,h,flip_h,flip_v)

 pal()
 _palette()

 spr(sp,x,y,w,h,flip_h,flip_v)
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000444400000000000bbbb500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000044ccc4002222200b5afff500bbb55000222220000000000055555000444440000000000000000000000000000000000000000000000000000000000
000000000aaffa40222222205affffb0bbbaaa50222222200444c400555445500444444000000000000000000000000000000000000000000000000000000000
00000000af2ff2a0222cc220af2ff2a0baafffb02cc44cc04ccaac40544aa4504aaffa4000000000000000000000000000000000000000000000000000000000
000000000ff44ff022c44c20fff88ff0af2ff2f0c42442404aaffac05a2aa2a0af2ff2a000000000000000000000000000000000000000000000000000000000
0000000000ffff00c42442400affff00fff88ff0444224404f2ff2f04aa44aa00ff88f4000000000000000000000000000000000000000000000000000000000
000000000002200024422440055ff5000fffff0004444400fff88ff00aaaaa0000fff44000000000000000000000000000000000000000000000000000000000
000000000222220022444400666556d000d1d00001122100caffffc00044400007bbb60000000000000000000000000000000000000000000000000000000000
000000000222220000333000a56666a00c6c6c00eeeeee10c44244c006666b000f777f0000000000000000000000000000000000000000000000000000000000
000000000222220003999300f56666f006dc6d0021eeee20989998900a566a000f888f0000000000000000000000000000000000000000000000000000000000
000000000f111f0004999400f11111f00c424c0041eeee40fdddddf00a111a000f808f0000000000000000000000000000000000000000000000000000000000
0000000000c0c000046664000cc0cc000f404f004ddddd40fdddddf00ae0ea000080800000000000000000000000000000000000000000000000000000000000
0000000000c0c000006060000cc0cc00004040000ff0ff00fdddddf000e0e0000080800000000000000000000000000000000000000000000000000000000000
0000000000c0c000006060000cc0cc00004040000ff0ff0000ddd00000e0e0000060600000000000000000000000000000000000000000000000000000000000
00000000007070000050500005d05d0000202000067067000070700000c0c0000070700000000000000000000000000000000000000000000000000000000000
00000000044cc400002222000444c4000ee44e000022220004444400022222000444440000000000000000000000000000000000000000000000000000000000
0000000004caac000222222044ccac40eee11ee0022222004c444440224442200444cc4000000000000000000000000000000000000000000000000000000000
000000000aaffa0022c42c204caffac04aaffa40022cc2204c4aaac0244aa4204aaffac000000000000000000000000000000000000000000000000000000000
00000000ff2ff2f0c4244240af2ff2f0ff2ff2f0c42442404a2ff2f0aa2aa2a0af2ff2a000000000000000000000000000000000000000000000000000000000
000000000ff44f00244224200ff88f000ff88f0004422400cff88fc00aa44a000ff88fc000000000000000000000000000000000000000000000000000000000
0000000000111000223332200ddddd00009990000eeeee00d99999d000bbb0000066644000000000000000000000000000000000000000000000000000000000
000000000fcccf0004999400f33333f00f333f0004111400fdddddf00a111a000f888f0000000000000000000000000000000000000000000000000000000000
0000000000707000005050000d60d60000c0c0000070700000c0c000004040000070700000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
d666d666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66d666d6000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
d666d666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66d666d6000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
